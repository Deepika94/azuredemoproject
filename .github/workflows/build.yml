name: Build Container Image and Push it to ACR 

on:
 push:
  branches:
  - main 
  
jobs:
  build-and-push:
   runs-on: ubuntu-latest
   
   steps:
   - name: checkout Repository
     uses: actions/checkout@v2

   - name: Setup Docker Buildx
     uses: docker/setup-buildx-action@v1

   - name: Build and push Docker Images
     uses: docker/buuild-push-action@v2
     with:
      context: .
      push: true
      tags: webappacr01.azurecr.io/mywebappacr:latest
      env:
       DOCKER_USERNAME: ${{secrets.ACR_USERNAME}}
       DOCKER_PASSWORD: ${{secrets.ACR_PASSWORD}}
       
 
